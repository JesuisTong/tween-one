{"version":3,"sources":["webpack:///./src/plugin/SvgDrawPlugin.jsx?f897","webpack:///./examples/svgDrawShape.js"],"names":[],"mappings":"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","file":"svgDrawShape.js","sourcesContent":["/* eslint-disable func-names */\nconst SvgDrawPlugin = function (target, vars) {\n  this.target = target;\n  this.vars = vars;\n  this.start = {};\n  this.tagName = this.target.tagName.toLowerCase();\n};\nSvgDrawPlugin.prototype = {\n  name: 'SVGDraw',\n  setVars(vars) {\n    const _vars = { start: 0 };\n    if (typeof vars === 'number') {\n      _vars.end = vars;\n      return _vars;\n    }\n    const data = vars.split(' ');\n    if (data.length > 1) {\n      _vars.start = data[0].indexOf('%') >= 0 ?\n      parseFloat(data[0]) / 100 * this.length : parseFloat(data[0]);\n      _vars.end = data[1].indexOf('%') >= 0 ?\n      parseFloat(data[1]) / 100 * this.length : parseFloat(data[1]);\n    } else if (parseFloat(vars)) {\n      _vars.end = vars.indexOf('%') >= 0 ?\n      parseFloat(vars) / 100 * this.length : parseFloat(vars);\n    } else {\n      throw new Error(`SVGDraw data[${vars}] error.`);\n    }\n    return _vars;\n  },\n  getComputedStyle() {\n    return document.defaultView ? document.defaultView.getComputedStyle(this.target) : {};\n  },\n  getLineLength(x1, y1, x2, y2) {\n    const _x2 = parseFloat(x2) - parseFloat(x1);\n    const _y2 = parseFloat(y2) - parseFloat(y1);\n    return Math.sqrt(_x2 * _x2 + _y2 * _y2);\n  },\n  getPolyLength(name) {\n    // .match(/(?:(-|-=|\\+=)?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/gi)\n    const pointsArray = (this.target.getAttribute('points') || '').split(/\\s+/)\n      .map(item => item.split(',').map(n => parseFloat(n)));\n    if (name === 'polygon') {\n      pointsArray.push(pointsArray[0]);\n    }\n    let length = 0;\n    pointsArray.forEach((item, i) => {\n      if (i < pointsArray.length - 1) {\n        const nextPoint = pointsArray[i + 1];\n        length += this.getLineLength(item[0], item[1], nextPoint[0], nextPoint[1]);\n      }\n    });\n    return length;\n  },\n  getEllipseLength() {\n    const rx = parseFloat(this.target.getAttribute('rx'));\n    const ry = parseFloat(this.target.getAttribute('ry'));\n    if (!rx || !ry) {\n      throw new Error(`ellipse rx or ry error.`);\n    }\n    return Math.PI * (3 * (rx + ry) - Math.sqrt((3 * rx + ry) * (3 * ry + rx)));\n  },\n  getAnimStart() {\n    // console.log(this.target.getTotalLength(), this.target.getBBox())\n    const computedStyle = this.getComputedStyle();\n    switch (this.tagName) {\n      case 'rect':\n        this.length = this.target.getAttribute('width') * 2 +\n          this.target.getAttribute('height') * 2;\n        break;\n      case 'circle':\n        this.length = Math.PI * 2 * this.target.getAttribute('r');\n        break;\n      case 'line':\n        this.length = this.getLineLength(this.target.getAttribute('x1'),\n          this.target.getAttribute('y1'), this.target.getAttribute('x2'),\n          this.target.getAttribute('y2'));\n        break;\n      case 'polyline':\n      case 'polygon':\n        this.length = this.getPolyLength(this.tagName);\n        break;\n      case 'ellipse':\n        this.length = this.getEllipseLength();\n        break;\n      default:\n        this.length = this.target.getTotalLength();\n        break;\n    }\n    this.start.strokeDasharray = computedStyle.strokeDasharray === 'none'\n      ? '100% 100%' : computedStyle.strokeDasharray;\n    this.start.strokeDashoffset = parseFloat(computedStyle.strokeDashoffset);\n    this.start.strokeDasharray = this.setVars(this.start.strokeDasharray);\n    this.vars = this.setVars(this.vars);\n  },\n  setRatio(r, t) {\n    t.style.strokeDasharray = `${(this.vars.end - this.vars.start -\n      this.start.strokeDasharray.start) * r +\n      this.start.strokeDasharray.start}px, ${this.length}px`;\n    t.style.strokeDashoffset = -((this.vars.start + this.start.strokeDashoffset) * r\n      - this.start.strokeDashoffset);\n  },\n};\nexport default SvgDrawPlugin;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/plugin/SvgDrawPlugin.jsx\n **/","import Tween from 'rc-tween-one';\nimport React from 'react';\nimport ReactDom from 'react-dom';\nimport SvgDrawPlugin from '../src/plugin/SvgDrawPlugin';\nTween.plugins.push(SvgDrawPlugin);\n\nconst dataStartArr = ['100%', '30 450', '50% 50%', '30% 400', '50 30%', 0];\nlet i = 0;\nclass Demo extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      tweenData: '50 30%',\n    };\n  }\n\n  onClick() {\n    const tweenData = dataStartArr[i];\n    this.setState({\n      tweenData,\n    });\n    i++;\n    i = i >= dataStartArr.length ? 0 : i;\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.onClick.bind(this)}>点击切换</button>\n        <p>当前参数：{this.state.tweenData}</p>\n        <svg width=\"100%\" height=\"600\" version=\"1.2\">\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5,\n              stroke: '#000fff', transform: 'translate(10px, 10px)',\n            }}\n            width=\"100\"\n            height=\"100\"\n            component=\"rect\"\n          />\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"polygon\"\n            points=\"120,10 200,10 230,110 150,110\"\n            attr=\"attr\"\n          />\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"circle\"\n            cx=\"300\" cy=\"55\" r=\"50\"\n            attr=\"attr\"\n          />\n          <Tween\n            animation={{ SVGDraw: this.state.tweenData, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"ellipse\"\n            cx=\"500\" cy=\"55\" rx=\"100\" ry=\"50\"\n          />\n          <Tween\n            animation={{ SVGDraw: this.state.tweenData, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"line\"\n            x1=\"0\" y1=\"150\" x2=\"500\" y2=\"150\"\n          />\n        </svg>\n      </div>);\n  }\n}\nReactDom.render(<Demo />, document.getElementById('__react-content'));\n\n\n\n/** WEBPACK FOOTER **\n ** ./examples/svgDrawShape.js\n **/"],"sourceRoot":""}