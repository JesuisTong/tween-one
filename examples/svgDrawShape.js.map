{"version":3,"sources":["webpack:///./examples/svgDrawShape.js","webpack:///./src/plugin/SvgDrawPlugin.jsx"],"names":["Tween","plugins","push","dataStartArr","i","Demo","props","onClick","tweenData","setState","length","state","render","style","SVGDraw","duration","fill","strokeWidth","stroke","transform","React","Component","ReactDom","document","getElementById","SvgDrawPlugin","target","vars","start","tagName","toLowerCase","prototype","name","useStyle","setVars","_vars","end","data","split","indexOf","parseFloat","Error","getLineLength","x1","y1","x2","y2","_x2","_y2","Math","sqrt","getPolyLength","pointsArray","getAttribute","forEach","item","arr","floor","nextPoint","getEllipseLength","rx","ry","PI","getAnimStart","computedStyle","str","getTotalLength","toFixed","strokeDasharray","strokeDashoffset","setRatio","r","t"],"mappings":"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","file":"examples/svgDrawShape.js","sourcesContent":["import Tween from 'rc-tween-one';\nimport React from 'react';\nimport ReactDom from 'react-dom';\nimport SvgDrawPlugin from '../src/plugin/SvgDrawPlugin';\n\nTween.plugins.push(SvgDrawPlugin);\n\nconst dataStartArr = ['100%', '30 450', '50% 50%', '30% 400', '50 30%', 0];\nlet i = 0;\nclass Demo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      tweenData: '50 30%',\n    };\n  }\n\n  onClick = () => {\n    const tweenData = dataStartArr[i];\n    this.setState({\n      tweenData,\n    });\n    i++;\n    i = i >= dataStartArr.length ? 0 : i;\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.onClick}>点击切换</button>\n        <p>当前参数：{this.state.tweenData}</p>\n        <svg width=\"100%\" height=\"600\" version=\"1.2\">\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5,\n              stroke: '#000fff', transform: 'translate(10px, 10px)',\n            }}\n            width=\"100\"\n            height=\"100\"\n            component=\"rect\"\n          />\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"polygon\"\n            points=\"120,10 200,10 230,110 150,110\"\n            attr=\"attr\"\n          />\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"circle\"\n            cx=\"300\" cy=\"55\" r=\"50\"\n            attr=\"attr\"\n          />\n          <Tween\n            animation={{ SVGDraw: this.state.tweenData, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"ellipse\"\n            cx=\"500\" cy=\"55\" rx=\"100\" ry=\"50\"\n          />\n          <Tween\n            animation={{ SVGDraw: this.state.tweenData, duration: 1000 }}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"line\"\n            x1=\"0\" y1=\"150\" x2=\"500\" y2=\"150\"\n          />\n        </svg>\n      </div>);\n  }\n}\nReactDom.render(<Demo />, document.getElementById('__react-content'));\n\n\n\n// WEBPACK FOOTER //\n// ./examples/svgDrawShape.js","/* eslint-disable func-names */\nconst SvgDrawPlugin = function (target, vars) {\n  this.target = target;\n  this.vars = vars;\n  this.start = {};\n  this.tagName = this.target.tagName.toLowerCase();\n};\nSvgDrawPlugin.prototype = {\n  name: 'SVGDraw',\n  useStyle: 'stroke-dasharray, stroke-dashoffset',\n  setVars(vars) {\n    const _vars = { start: 0 };\n    if (typeof vars === 'number') {\n      _vars.end = vars;\n      return _vars;\n    }\n    const data = vars.split(' ');\n    if (data.length > 1) {\n      _vars.start = data[0].indexOf('%') >= 0 ?\n        parseFloat(data[0]) / 100 * this.length : parseFloat(data[0]);\n      _vars.end = data[1].indexOf('%') >= 0 ?\n        parseFloat(data[1]) / 100 * this.length : parseFloat(data[1]);\n    } else if (parseFloat(vars)) {\n      _vars.end = vars.indexOf('%') >= 0 ?\n        parseFloat(vars) / 100 * this.length : parseFloat(vars);\n    } else {\n      throw new Error(`SVGDraw data[${vars}] error.`);\n    }\n    return _vars;\n  },\n  getLineLength(x1, y1, x2, y2) {\n    const _x2 = parseFloat(x2) - parseFloat(x1);\n    const _y2 = parseFloat(y2) - parseFloat(y1);\n    return Math.sqrt(_x2 * _x2 + _y2 * _y2);\n  },\n  getPolyLength(name) {\n    // .match(/(?:(-|-=|\\+=)?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/gi)\n    const pointsArray = [];\n    (this.target.getAttribute('points') || '').split(/[\\s+|,]/)\n      .forEach((item, i) => {\n        const arr = pointsArray[Math.floor(i / 2)] || [];\n        arr.push(parseFloat(item));\n        if (!(i % 2)) {\n          pointsArray.push(arr);\n        }\n      });\n    if (name === 'polygon') {\n      pointsArray.push(pointsArray[0]);\n    }\n    let length = 0;\n    pointsArray.forEach((item, i) => {\n      if (i < pointsArray.length - 1) {\n        const nextPoint = pointsArray[i + 1];\n        length += this.getLineLength(item[0], item[1], nextPoint[0], nextPoint[1]);\n      }\n    });\n    return length;\n  },\n  getEllipseLength() {\n    const rx = parseFloat(this.target.getAttribute('rx'));\n    const ry = parseFloat(this.target.getAttribute('ry'));\n    if (!rx || !ry) {\n      throw new Error(`ellipse rx or ry error.`);\n    }\n    return Math.PI * (3 * (rx + ry) - Math.sqrt((3 * rx + ry) * (3 * ry + rx)));\n  },\n  getAnimStart(computedStyle) {\n    const getAttribute = (str) => (this.target.getAttribute(str));\n    switch (this.tagName) {\n      case 'circle':\n        this.length = Math.PI * 2 * getAttribute('r');\n        break;\n      case 'line':\n        this.length = this.getLineLength(getAttribute('x1'),\n          getAttribute('y1'), getAttribute('x2'),\n          getAttribute('y2'));\n        break;\n      case 'polyline':\n      case 'polygon':\n        this.length = this.getPolyLength(this.tagName);\n        break;\n      case 'ellipse':\n        this.length = this.getEllipseLength();\n        break;\n      case 'rect':\n        this.length = getAttribute('width') * 2 + getAttribute('height') * 2;\n        break;\n      case 'path':\n        this.length = this.target.getTotalLength();\n        break;\n      default:\n        throw new Error('The label is not a label in the SVG.');\n    }\n    this.length = parseFloat(this.length.toFixed(3));\n    this.start.strokeDasharray = computedStyle.strokeDasharray === 'none' ||\n      !computedStyle.strokeDasharray ? '100% 100%' : computedStyle.strokeDasharray;\n    this.start.strokeDashoffset = parseFloat(computedStyle.strokeDashoffset);\n    this.start.strokeDasharray = this.setVars(this.start.strokeDasharray);\n    this.vars = this.setVars(this.vars);\n  },\n  setRatio(r, t) {\n    t.style.strokeDasharray = `${(this.vars.end - this.vars.start -\n      this.start.strokeDasharray.start) * r +\n      this.start.strokeDasharray.start}px, ${this.length}px`;\n    t.style.strokeDashoffset = -((this.vars.start + this.start.strokeDashoffset) * r\n      - this.start.strokeDashoffset);\n  },\n};\nexport default SvgDrawPlugin;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plugin/SvgDrawPlugin.jsx"],"sourceRoot":""}