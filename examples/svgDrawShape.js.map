{"version":3,"sources":["webpack:///./src/plugin/SvgDrawPlugin.jsx?f897","webpack:///./examples/svgDrawShape.js"],"names":[],"mappings":"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","file":"svgDrawShape.js","sourcesContent":["const SvgDrawPlugin = function(target, vars) {\n  this.target = target;\n  this.vars = vars;\n  this.start = {};\n  this.tagName = this.target.tagName.toLowerCase();\n};\nSvgDrawPlugin.prototype = {\n  name: 'SVGDraw',\n  setVars(vars) {\n    const _vars = { start: 0 };\n    if (typeof vars === 'number') {\n      _vars.end = vars;\n      return _vars;\n    }\n    const data = vars.split(' ');\n    if (data.length > 1) {\n      _vars.start = data[0].indexOf('%') >= 0 ?\n      parseFloat(data[0]) / 100 * this.length : parseFloat(data[0]);\n      _vars.end = data[1].indexOf('%') >= 0 ?\n      parseFloat(data[1]) / 100 * this.length : parseFloat(data[1]);\n    } else if (parseFloat(vars)) {\n      _vars.end = vars.indexOf('%') >= 0 ?\n      parseFloat(vars) / 100 * this.length : parseFloat(vars);\n    } else {\n      throw new Error(`SVGDraw data[${vars}] error.`);\n    }\n    return _vars;\n  },\n  getComputedStyle() {\n    return document.defaultView ? document.defaultView.getComputedStyle(this.target) : {};\n  },\n  getLineLength(x1, y1, x2, y2) {\n    const _x2 = parseFloat(x2) - parseFloat(x1);\n    const _y2 = parseFloat(y2) - parseFloat(y1);\n    return Math.sqrt(_x2 * _x2 + _y2 * _y2);\n  },\n  getPolyLength(name) {\n    // .match(/(?:(-|-=|\\+=)?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/gi)\n    const pointsArray = (this.target.getAttribute('points') || '').split(/\\s+/)\n      .map(item => item.split(',').map(n => parseFloat(n)));\n    if (name === 'polygon') {\n      pointsArray.push(pointsArray[0]);\n    }\n    let length = 0;\n    pointsArray.forEach((item, i) => {\n      if (i < pointsArray.length - 1) {\n        const nextPoint = pointsArray[i + 1];\n        length += this.getLineLength(item[0], item[1], nextPoint[0], nextPoint[1]);\n      }\n    });\n    return length;\n  },\n  getEllipseLength() {\n    const rx = parseFloat(this.target.getAttribute('rx'));\n    const ry = parseFloat(this.target.getAttribute('ry'));\n    if (!rx || !ry) {\n      throw new Error(`ellipse rx or ry error.`);\n    }\n    return Math.PI * (3 * (rx + ry) - Math.sqrt((3 * rx + ry) * (3 * ry + rx)));\n  },\n  getAnimStart() {\n    // console.log(this.target.getTotalLength(), this.target.getBBox())\n    const computedStyle = this.getComputedStyle();\n    switch (this.tagName) {\n      case 'rect':\n        this.length = this.target.getAttribute('width') * 2 + this.target.getAttribute('height') * 2;\n        break;\n      case 'circle':\n        this.length = Math.PI * 2 * this.target.getAttribute('r');\n        break;\n      case 'line':\n        this.length = this.getLineLength(this.target.getAttribute('x1'),\n          this.target.getAttribute('y1'), this.target.getAttribute('x2'),\n          this.target.getAttribute('y2'));\n        break;\n      case 'polyline':\n      case 'polygon':\n        this.length = this.getPolyLength(this.tagName);\n        break;\n      case 'ellipse':\n        this.length = this.getEllipseLength();\n        break;\n      default:\n        this.length = this.target.getTotalLength();\n        break;\n    }\n    this.start.strokeDasharray = computedStyle.strokeDasharray === 'none'\n      ? '100% 100%' : computedStyle.strokeDasharray;\n    this.start.strokeDashoffset = parseFloat(computedStyle.strokeDashoffset);\n    this.start.strokeDasharray = this.setVars(this.start.strokeDasharray);\n    this.vars = this.setVars(this.vars);\n  },\n  setRatio(r, t) {\n    t.style.strokeDasharray = `${(this.vars.end - this.vars.start - this.start.strokeDasharray.start) * r + this.start.strokeDasharray.start}px, ${this.length}px`;\n    t.style.strokeDashoffset = -((this.vars.start + this.start.strokeDashoffset) * r - this.start.strokeDashoffset);\n  },\n};\nexport default SvgDrawPlugin;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/plugin/SvgDrawPlugin.jsx\n **/","import Tween from 'rc-tween-one';\nimport React from 'react';\nimport ReactDom from 'react-dom';\nimport SvgDrawPlugin from '../src/plugin/SvgDrawPlugin';\nTween.plugins.push(SvgDrawPlugin);\n\nconst dataStartArr = ['100%', '30 450', '50% 50%', '30% 400', '50 30%', 0];\nlet i = 0;\nclass Demo extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      tweenData: '50 30%',\n    };\n  }\n\n  onClick() {\n    const tweenData = dataStartArr[i];\n    this.setState({\n      tweenData,\n    });\n    i++;\n    i = i >= dataStartArr.length ? 0 : i;\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.onClick.bind(this)}>点击切换</button>\n        <p>当前参数：{this.state.tweenData}</p>\n        <svg width=\"100%\" height=\"600\" version=\"1.2\" xmlns=\"http://www.w3.org/2000/svg\">\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000}}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff', transform: 'translate(10px, 10px)' }}\n            width=\"100\"\n            height=\"100\"\n            component=\"rect\"\n          />\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000}}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"polygon\"\n            points=\"120,10 200,10 230,110 150,110\"\n            attr=\"attr\"\n          />\n          <Tween\n            animation={{ style: { SVGDraw: this.state.tweenData }, duration: 1000}}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"circle\"\n            cx=\"300\" cy=\"55\" r=\"50\"\n            attr=\"attr\"\n          />\n          <Tween\n            animation={{ SVGDraw: this.state.tweenData, duration: 1000}}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"ellipse\"\n            cx=\"500\" cy=\"55\" rx=\"100\" ry=\"50\"\n          />\n          <Tween\n            animation={{ SVGDraw: this.state.tweenData, duration: 1000}}\n            style={{ fill: '#fff000', strokeWidth: 5, stroke: '#000fff' }}\n            component=\"line\"\n            x1=\"0\" y1=\"150\" x2=\"500\" y2=\"150\"\n          />\n        </svg>\n      </div>);\n  }\n}\nReactDom.render(<Demo />, document.getElementById('__react-content'));\n\n\n\n/** WEBPACK FOOTER **\n ** ./examples/svgDrawShape.js\n **/"],"sourceRoot":""}